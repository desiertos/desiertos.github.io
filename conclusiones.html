<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js"></script>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Lusitana:wght@400;700&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Newsreader:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,600;1,700;1,800&family=Rubik:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./styles/dash.css">
    <title>Desiertos de noticias em la Argentina</title>
</head>
<body>

    <header class='header-dashboard'>

        <div class="brands-wrapper">
            <div class="brands">
              <a href="https://www.fopea.org/" target="_blank"><img src="../img/brands/logo-fopea.png" alt="Logotipo de Fopea"></a>
              <div class="pipe"></div>
              <a href="https://newsinitiative.withgoogle.com/" target="_blank"><img src="../img/brands/google.svg" alt="Logotipo da Google News Initiative"></a>
            </div>
        </div>
        <h1 class="dashboard--title">Desiertos de noticias em la Argentina</h1>
        <button class="menu-toggle">&#8801;</button>
    </header>

    <div class="menu-backdrop"></div>

    <nav>      
        <ul class="menu">
            <li class="no-link limited-height">desiertos de noticias</li>
            <li><a href="./index.html">¿Accedes a noticias locales?</a></li>
            <li><a href="./dashboard/index.html">Mapa interactivo</a></li>
            <li><a href="./metodologia.html">Metodología</a></li>
            <li><a href="./conclusiones.html">Conclusiones</a></li>
            <li><a href="./etica.html">Código de Ética</a></li>
            <li class="limited-height">
                <a href="https://www.fopea.org/" target="_blank"><img src="../img/brands/logo-fopea.png" alt="Logotipo de Fopea"></a>
            </li>
            <li class="limited-height">
                <a href="https://newsinitiative.withgoogle.com/" target="_blank"><img src="../img/brands/google.svg" alt="Logotipo da Google News Initiative"></a>
            </li>
        </ul>
    </nav>

    <main class="metodologia">

        <article>

            <header class="full-bleed header-conclusiones">
                <h2>
                    <span class="kicker">
                        Mayo de 2021
                    </span>

                    Conclusiones

                    <span class="conclusiones-author">
                        Por FOPEA
                    </span>

                </h2>

                <p class="dek">
                    (380) Estas conclusiones surgen de una investigación inédita llevada adelante en todo el país entre noviembre de 2020 y abril de 2021. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum tempus cursus eros a rutrum. Cras facilisis massa ac tortor suscipit malesuada. Nunc maximus, lectus tempor tristique convallis, leo massa scelerisque odio, in commodo elit augue sed magna.
                </p>

            </header>


            <div class="limited-width">

                <h3 class="conclusiones-text-title">
                    Desiertos Informativos de la Argentina
                </h3>
                <p class="conclusiones-dek-text-title">
                    (150 - 200) Inserte aquí una delgada línea introduciendo las conclusiones. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum tempus cursus eros a rutrum.
                </p>
 
            </div>

            <figure class="conclusiones-barchart-argentina full-bleed">

                <p class="screen-reader">
                    This is a bar chart showing the counting.
                </p>

                <p class="conclusiones-barchart-argentina-main-label">
                    Argentina
                </p>

                <div class="counts">
                    <div class='js--category-count' data-count='47,9%' data-category='desierto' style="flex-basis: 47.9%;"></div>  
                    <div class='js--category-count' data-count='25,2%' data-category='semidesierto' style="flex-basis: 25.2%;"></div>  
                    <div class='js--category-count' data-count='17,1%' data-category='semibosque' style="flex-basis: 17.1%;"></div>                    
                    <div class='js--category-count' data-count='9,8%' data-category='bosque' style="flex-basis: 9.8%;"></div>
                </div>

            </figure>

            <div class="limited-width">

                <p class="conclusiones-text">
                    (500) Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin felis velit, posuere ac eleifend in, rutrum ac risus. Nulla convallis tincidunt nisi eu efficitur. Aenean condimentum aliquet dui, sed auctor dolor. Cras elementum nulla eu mattis finibus. Duis vel vestibulum lectus. Vestibulum vestibulum eros tellus, vel tempus ipsum tempor ut. Phasellus auctor tincidunt posuere. Curabitur egestas, ante eget maximus vehicula.
                </p>

                <div class="conclusiones-table-wrapper">

                    <div class="conclusiones-table-medios">

                        <p class="conclusiones-table-title">
                            medios
                        </p>

                        <div class="conclusiones-table-info-wrapper">
                            
                            <p class="conclusiones-table-number">
                                2.464
                            </p>

                            <p class="conclusiones-table-text">
                                medios en todo el país
                            </p>

                        </div>

                        <div class="conclusiones-table-info-wrapper">

                            <p class="conclusiones-table-text">
                                un medio cada
                            </p>
                            
                            <p class="conclusiones-table-number">
                                13.451
                            </p>

                            <p class="conclusiones-table-text">
                                habitantes
                            </p>

                        </div>

                    </div>

                    <div class="conclusiones-table-medios">

                        <p class="conclusiones-table-title">
                            periodistas
                        </p>

                        <div class="conclusiones-table-info-wrapper">
                            
                            <p class="conclusiones-table-number">
                                13.597
                            </p>

                            <p class="conclusiones-table-text">
                                periodistas en todo el país
                            </p>

                        </div>

                        <div class="conclusiones-table-info-wrapper">

                            <p class="conclusiones-table-text">
                                un periodista cada
                            </p>
                            
                            <p class="conclusiones-table-number">
                                3.826
                            </p>

                            <p class="conclusiones-table-text">
                                habitantes
                            </p>

                        </div>

                    </div>

                </div>

                <p class="conclusiones-highlight">
                    En promedio, un medio tiene 5 periodistas en la Argentina.
                </p>

                <div class="conclusiones-ranking-container">

                    <svg class="conclusiones-ranking">

                    </svg>

                </div>

            </div>







            </figure>

        </article>

    </main>

    <script src="./scripts/d3.v6.min.js"></script>
    <script>

        // menu

        const menu = {

            ref : {

                button : 'button.menu-toggle',
                menu : 'ul.menu',
                backdrop : '.menu-backdrop'

            },

            monitor_click : function() {

                const btn = document.querySelector(this.ref.button);
                const menu = document.querySelector(this.ref.menu);
                const bkdrop = document.querySelector(this.ref.backdrop);

                btn.addEventListener('click', function(e) {

                    menu.classList.toggle('is-open');
                    btn.classList.toggle('clicked');
                    bkdrop.classList.toggle('activated');

                })

            }

        }

        const vis = {

            refs : {

                container : '.conclusiones-ranking-container',
                svg : 'svg.conclusiones-ranking'

            },

            data : {

                file : './data/ranking.json',

                raw : null,

                read : function() {

                    fetch(this.file, {mode: 'cors'})
                      .then( response => response.json() )
                      .then( data => vis.begin(data) );

                }

            },

            sizing : {

                h : 1000,
                w : null,

                margin : {

                    left : 100

                },

                get : function() {

                    let w = +d3.select(vis.refs.container).style('width').slice(0,-2);

                    console.log(w);

                    this.w = w;

                }

            },

            components : {

                scales : {

                    x : d3.scaleLinear(),
                    w : d3.scaleLinear(),
                    y : d3.scaleBand(),

                    set : function() {

                        this.x.range([vis.sizing.margin.left, vis.sizing.w])
                        this.w.range([0, vis.sizing.w])
                        this.y.range([0, vis.sizing.h])

                        this.x.domain([0,1]);
                        this.w.domain([0,1]);
                        this.y.domain(vis.data.raw.map(d => d.nam));

                    }

                }
            },

            init : function() {

                vis.sizing.get();
                vis.data.read();

            },

            begin : function(data) {

                console.log(data);

                this.data.raw = data;
                vis.components.scales.set();

            }

        }

        menu.monitor_click();

        vis.init();




    </script>

    
</body>
</html>